<!DOCTYPE html>
<html>
  <body>
    <p id="result"></p>
    <form id="roll">
    <input type="text" id="dice" autofocus>
    <button type="button">
      Roll!!
    </button>
    </form>

    <script>
      document.getElementById("roll").addEventListener("submit", function(e) {
        e.preventDefault();
        var points = rollDice();
        document.getElementById("result").innerHTML=points;
      });
      function rollDice() {
        var points = 0
        var dice = document.getElementById("dice").value;
        dice = dice.split("+");
        for (var i = 0; i < dice.length; ++i) {
          var die = dice[i].replace("D", "d");
          if (die.includes("d")) {
            die = die.split("d");
            var times, faces;
            if (die[0].length == 0) {
              times = 1;
            } else {
              times = parseInt(die[0], 10);
            }
            faces = parseInt(die[1], 10);
            for (var j = 0; j < times; ++j) {
              points += randomIntFromInterval(1, faces);
            }
          } else {
            points += parseInt(die, 10);
          }
        }
        return points;
      }
      function randomIntFromInterval(min,max) {
        return Math.floor(Math.random()*(max-min+1)+min);
      }
    </script>

  </body>
</html>

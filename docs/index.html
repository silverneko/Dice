<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Dice by silverneko</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Dice</h1>
      <h2 class="project-tagline">TRPG Dice</h2>
    </section>

    <section class="main-content">
      <div>
        <p id="result"></p>
        <form id="roll">
          <input type="text" id="dice" autofocus>
          <button type="submit" >
            Roll!!
          </button>
        </form>
      </div>

<h2>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example</h2>

<ul>
<li>
<code>1d6</code>: Roll a six-face die.</li>
<li>
<code>d4+2d8</code>: Roll a four-face die and two eight-face dice.</li>
<li>
<code>1+d100</code>: Roll a hundred-face die and add 1.</li>
<li>
<code>d6,d6,d6</code>: Roll three six-face dice one at a time.</li>
</ul>

    <script>
      document.getElementById("roll").addEventListener("submit", function(e) {
        e.preventDefault();
        var points = rollDice();
        document.getElementById("result").innerHTML=points;
      });
      function rollDice() {
        var input = document.getElementById("dice").value;
        input = input.replace(/[^0-9dD,+\-]+/g, "");
        var dices = input.split(",");
        var result = [];
        for (var i = 0; i < dices.length; ++i) {
          var points = 0;
          var dice = dices[i].split("+");
          for (var j = 0; j < dice.length; ++j) {
            var die = dice[j].replace("D", "d");
            if (die.includes("d")) {
              die = die.split("d");
              var times, faces;
              if (die[0].length == 0) {
                times = 1;
              } else {
                times = parseInt(die[0], 10);
              }
              faces = parseInt(die[1], 10);
              for (var k = 0; k < times; ++k) {
                points += randomIntFromInterval(1, faces);
              }
            } else {
              points += parseInt(die, 10);
            }
          }
          result.push(points);
        }
        return result.join();
      }
      function randomIntFromInterval(min,max) {
        return Math.floor(Math.random()*(max-min+1)+min);
      }
    </script>
      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/silverneko/Dice">Dice</a> is maintained by <a href="https://github.com/silverneko">silverneko</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
